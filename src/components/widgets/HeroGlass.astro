---
import Image from '~/components/common/Image.astro';
import Button from '~/components/ui/Button.astro';
import AnimatedBlobs from '~/components/ui/AnimatedBlobs.astro';
import GlassCard from '~/components/ui/GlassCard.astro';

import type { Hero as Props } from '~/types';

const {
  title = await Astro.slots.render('title'),
  subtitle = await Astro.slots.render('subtitle'),
  tagline,

  content = await Astro.slots.render('content'),
  actions = await Astro.slots.render('actions'),
  image = await Astro.slots.render('image'),

  id,
} = Astro.props;
---

<section class="relative md:-mt-[76px] not-prose overflow-hidden" {...id ? { id } : {}}>
  <!-- Animated gradient background -->
  <div class="absolute inset-0 bg-gradient-to-br from-blue-50 via-white to-purple-50 dark:from-slate-900 dark:via-slate-800 dark:to-slate-900">
    <AnimatedBlobs />
  </div>

  <!-- Grid pattern overlay -->
  <div class="absolute inset-0 bg-[url('data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNjAiIGhlaWdodD0iNjAiIHZpZXdCb3g9IjAgMCA2MCA2MCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48ZyBmaWxsPSJub25lIiBmaWxsLXJ1bGU9ImV2ZW5vZGQiPjxwYXRoIGQ9Ik0zNiAxOGMwLTkuOTQtOC4wNi0xOC0xOC0xOFMwIDguMDYgMCAxOHM4LjA2IDE4IDE4IDE4IDE4LTguMDYgMTgtMTh6IiBzdHJva2U9InJnYmEoMCwwLDAsMC4wMykiLz48L2c+PC9zdmc+')] opacity-30 dark:opacity-10"></div>

  <div class="relative max-w-7xl mx-auto px-4 sm:px-6">
    <div class="pt-0 md:pt-[76px]"></div>
    <div class="py-12 md:py-20 lg:py-28">
      <div class="grid lg:grid-cols-2 gap-8 lg:gap-12 items-center">

        <!-- Content side -->
        <div class="text-center lg:text-left order-2 lg:order-1">
          {
            tagline && (
              <p
                class="inline-block px-4 py-1.5 mb-4 text-sm font-semibold text-primary bg-primary/10 rounded-full animate-fade-in"
                set:html={tagline}
              />
            )
          }

          {
            title && (
              <h1
                class="text-4xl sm:text-5xl md:text-6xl font-bold leading-tight tracking-tight mb-6 text-gray-900 dark:text-white animate-slide-up"
                style="animation-delay: 0.1s"
                set:html={title}
              />
            )
          }

          {
            subtitle && (
              <p
                class="text-lg md:text-xl text-gray-600 dark:text-slate-300 mb-8 max-w-2xl mx-auto lg:mx-0 animate-slide-up"
                style="animation-delay: 0.2s"
                set:html={subtitle}
              />
            )
          }

          {
            actions && (
              <div class="flex flex-wrap justify-center lg:justify-start gap-4 animate-slide-up" style="animation-delay: 0.3s">
                {Array.isArray(actions) ? (
                  actions.map((action, index) => (
                    <Button
                      {...(action || {})}
                      class={`
                        ${action.variant === 'primary'
                          ? 'bg-gradient-to-r from-primary to-blue-600 text-white shadow-lg shadow-primary/30 hover:shadow-xl hover:shadow-primary/40 hover:scale-105'
                          : 'bg-white/80 dark:bg-slate-800/80 backdrop-blur-sm border border-gray-200 dark:border-slate-700 hover:bg-white dark:hover:bg-slate-700'
                        }
                        px-8 py-4 rounded-xl font-semibold transition-all duration-300
                      `}
                    />
                  ))
                ) : (
                  <Fragment set:html={actions} />
                )}
              </div>
            )
          }

          {content && <div class="mt-8 animate-slide-up" style="animation-delay: 0.4s"><Fragment set:html={content} /></div>}

          <!-- Trust indicators -->
          <div class="mt-10 flex flex-wrap items-center justify-center lg:justify-start gap-6 text-sm text-gray-500 dark:text-slate-400 animate-fade-in" style="animation-delay: 0.5s">
            <div class="flex items-center gap-2">
              <svg class="w-5 h-5 text-green-500" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7" />
              </svg>
              <span>500+ nöjda kunder</span>
            </div>
            <div class="flex items-center gap-2">
              <svg class="w-5 h-5 text-green-500" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7" />
              </svg>
              <span>Leverans i hela Skåne</span>
            </div>
          </div>
        </div>

        <!-- Image side with glassmorphism -->
        <div class="order-1 lg:order-2 animate-float">
          <GlassCard class="p-4 lg:p-6">
            {
              image && (
                <div class="relative overflow-hidden rounded-xl">
                  {typeof image === 'string' ? (
                    <Fragment set:html={image} />
                  ) : (
                    <Image
                      class="w-full h-auto rounded-xl transform hover:scale-[1.02] transition-transform duration-500"
                      widths={[400, 768, 1024]}
                      sizes="(max-width: 767px) 400px, (max-width: 1023px) 768px, 1024px"
                      loading="eager"
                      width={800}
                      height={600}
                      {...image}
                    />
                  )}

                  <!-- Floating badge -->
                  <div class="absolute -bottom-3 -right-3 bg-gradient-to-r from-primary to-blue-600 text-white px-4 py-2 rounded-xl shadow-lg text-sm font-semibold animate-bounce-subtle">
                    Boka nu!
                  </div>
                </div>
              )
            }
          </GlassCard>
        </div>
      </div>
    </div>
  </div>
</section>

<style>
  @keyframes fade-in {
    from { opacity: 0; }
    to { opacity: 1; }
  }

  @keyframes slide-up {
    from {
      opacity: 0;
      transform: translateY(30px);
    }
    to {
      opacity: 1;
      transform: translateY(0);
    }
  }

  @keyframes float {
    0%, 100% {
      transform: translateY(0);
    }
    50% {
      transform: translateY(-10px);
    }
  }

  @keyframes bounce-subtle {
    0%, 100% {
      transform: translateY(0);
    }
    50% {
      transform: translateY(-5px);
    }
  }

  .animate-fade-in {
    animation: fade-in 0.6s ease-out both;
  }

  .animate-slide-up {
    animation: slide-up 0.8s cubic-bezier(0.16, 1, 0.3, 1) both;
  }

  .animate-float {
    animation: float 6s ease-in-out infinite;
  }

  .animate-bounce-subtle {
    animation: bounce-subtle 2s ease-in-out infinite;
  }

  @media (prefers-reduced-motion: reduce) {
    .animate-fade-in,
    .animate-slide-up,
    .animate-float,
    .animate-bounce-subtle {
      animation: none;
    }
  }
</style>
